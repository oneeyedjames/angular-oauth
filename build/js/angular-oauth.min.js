angular.module("angular.plugins.oauth",[]).provider("$oauth",function(){var t,n,r,e;this.consumerKey=function(n){return n?(t=n,this):t},this.consumerSecret=function(t){return t?(n=t,this):n};var o=decodeURIComponent,u=function(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},a=function(t){var n=[],r=Object.keys(t);r.sort();for(var e in r){var o=r[e];n.push(u(o)+"="+u(t[o]))}return n.join("&")},i=function(){var t={};for(var n in arguments){var r=arguments[n],e=Object.keys(r);for(var o in e){var u=e[o];t.hasOwnProperty(u)||(t[u]=r[u])}}return t},c=function(t){for(var n=[],r=0;t>r;r++){var e=Math.floor(255*Math.random());n.push((16>e?"0":"")+e.toString(16))}return n.join("")},s=function(n,e,o){var u={oauth_consumer_key:t,oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.floor(Date.now()/1e3),oauth_nonce:c(16),oauth_version:"1.0"};r&&(u.oauth_token=r);var a=i(u,o||{});return u.oauth_signature=h(n,e,a),u},h=function(t,r,o){var i=[t.toUpperCase(),u(r),u(a(o))].join("&"),c=n+"&";e&&(c+=e);var s=CryptoJS.HmacSHA1(i,c);return CryptoJS.enc.Base64.stringify(s)},f=function(t,n,r){var e=s(t,n,r),o=[];for(var u in e)o.push(u+'="'+e[u]+'"');return"OAuth "+o.join(", ")},p=function(t){var n=[];for(var r in t)n.push(u(r)+"="+u(t[r]));return n.join("&")},v=function(t){var n={};return t.split("&").forEach(function(t){var r=t.split("=");n[o(r[0])]=o(r[1])}),n},m=function(){r=null,e=null};this.$get=["$rootScope","$http","$q",function(o,u,a){return{get:function(t){var n=document.createElement("a");n.href=t;var r=n.origin+n.pathname,e=n.search?v(n.search.substr(1)):[];return u.get(t,{headers:{Authorization:f("GET",r,e)},withCredentials:!0})},post:function(t,n){return u.post(t,p(n),{headers:{Authorization:f("POST",t,n),"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})},reset:function(){m(),o.$broadcast("oauth.reset_token")},consumerKey:function(n){return n?(t=n,this):t},consumerSecret:function(t){return t?(n=t,this):n},token:function(t){return t?(r=t,this):r},tokenSecret:function(t){return t?(e=t,this):e}}}]});