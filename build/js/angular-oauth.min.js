angular.module("angular.plugins.oauth",[]).provider("$oauth",function(){var t,r,n,e;this.consumerKey=function(r){return r?(t=r,this):t},this.consumerSecret=function(t){return t?(r=t,this):r};var o=decodeURIComponent,u=function(t){return(""+t).replace(/[^a-z0-9-._~]/gi,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})},a=function(t){var r=[],n=Object.keys(t);n.sort();for(var e in n){var o=n[e];r.push(u(o)+"="+u(t[o]))}return r.join("&")},i=function(){var t={};for(var r in arguments){var n=arguments[r],e=Object.keys(n);for(var o in e){var u=e[o];t.hasOwnProperty(u)||(t[u]=n[u])}}return t},c=function(t){for(var r=[],n=0;t>n;n++){var e=Math.floor(255*Math.random());r.push((16>e?"0":"")+e.toString(16))}return r.join("")},s=function(r,e,o){var u={oauth_consumer_key:t,oauth_signature_method:"HMAC-SHA1",oauth_timestamp:Math.floor(Date.now()/1e3),oauth_nonce:c(16),oauth_version:"1.0"};n&&(u.oauth_token=n);var a=i(u,o||{});return u.oauth_signature=h(r,e,a),u},h=function(t,n,o){var i=[t.toUpperCase(),u(n),u(a(o))].join("&"),c=r+"&";e&&(c+=e);var s=CryptoJS.HmacSHA1(i,c);return CryptoJS.enc.Base64.stringify(s)},f=function(t,r,n){var e=s(t,r,n),o=[];for(var u in e)o.push(u+'="'+e[u]+'"');return"OAuth "+o.join(", ")},p=function(t){var r=[];for(var n in t)r.push(u(n)+"="+u(t[n]));return r.join("&")},v=function(t){var r={};return t.split("&").forEach(function(t){var n=t.split("=");r[o(n[0])]=o(n[1])}),r},l=function(){n=null,e=null};this.$get=["$rootScope","$http","$q",function(o,u,a){return{get:function(t){var r=document.createElement("a");r.href=t;var n=r.origin+r.pathname,e=r.search?v(r.search.substr(1)):[];return u.get(t,{headers:{Authorization:f("GET",n,e)},withCredentials:!0})},post:function(t,r){return u.post(t,p(r),{headers:{Authorization:f("POST",t,r),"Content-Type":"application/x-www-form-urlencoded"},withCredentials:!0})},reset:function(){l(),o.$broadcast("oauth.reset_token")},consumerKey:function(r){return r?(t=r,this):t},consumerSecret:function(t){return t?(r=t,this):r},token:function(t){return t?(n=t,this):n},tokenSecret:function(t){return t?(e=t,this):e}}}]});